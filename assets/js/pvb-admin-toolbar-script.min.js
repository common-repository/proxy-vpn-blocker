jQuery(document).ready((function($){function updateToolbarState(data){var toolbarItem=$("#wp-admin-bar-proxy_vpn_blocker .ab-item img"),blockMethod=$("#wp-admin-bar-block_method .ab-item"),cacheStatus=$("#wp-admin-bar-cache_status"),toggleLink=$("#wp-admin-bar-pvb-toggle-block-post .ab-item"),promptLink=$("#wp-admin-bar-prompt .ab-item");"1"===data.checkbox_value?(toolbarItem.attr("src",pvb_admin_toolbar.plugin_url+"assets/img/pvb-green-dot.svg"),blockMethod.text("This Page/Post is restricted for Proxies/VPNs"),toggleLink.text("Immediately Unblock Proxies and VPNs Here"),cacheStatus.show(),cacheStatus.find(".ab-item").text(pvb_admin_toolbar.cache_status)):(toolbarItem.attr("src",pvb_admin_toolbar.plugin_url+"assets/img/pvb-red-dot.svg"),blockMethod.text("This Page/Post is not restricted for Proxies/VPNs"),cacheStatus.hide(),toggleLink.text("Immediately Block Proxy and VPNs Here")),data.post_edit_link&&(promptLink.attr("href",data.post_edit_link),promptLink.text("Change blocking method"))}$("#wp-admin-bar-pvb-toggle-block-post a").on("click",(function(e){e.preventDefault();var post_id=pvb_admin_toolbar.post_id,nonce=pvb_admin_toolbar.nonce;$.ajax({type:"POST",url:pvb_admin_toolbar.ajax_url,data:{action:"pvb_admin_toolbar",nonce:nonce,post_id:post_id,toggle:!0},success:function(response){var data;response.success&&updateToolbarState(response.data)}})})),$.ajax({type:"POST",url:pvb_admin_toolbar.ajax_url,data:{action:"pvb_admin_toolbar",nonce:pvb_admin_toolbar.nonce,post_id:pvb_admin_toolbar.post_id},success:function(response){var data;response.success&&updateToolbarState(response.data)}})}));